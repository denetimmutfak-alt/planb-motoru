#!/bin/bash
# HETZNER SUNUCU TELEGRAM BOT ANALÄ°ZÄ° VE Ã‡Ã–ZÃœMÃœ

echo "ðŸ” MEVCUT DURUM ANALÄ°ZÄ°:"
echo "âœ… Sunucu Ã§alÄ±ÅŸÄ±yor: 1 gÃ¼n uptime"
echo "âœ… Telegram bot dosyalarÄ± mevcut: /root/PlanB_Motoru/"
echo "âŒ planb.service bulunamadÄ±"
echo "âŒ Docker yÃ¼klÃ¼ deÄŸil"
echo ""

echo "ðŸŽ¯ SORUN: Telegram bot systemd servisi olarak kurulmamÄ±ÅŸ!"
echo "Bu yÃ¼zden sunucu restart olduÄŸunda bot durur."
echo ""

echo "ðŸ’¡ Ã‡Ã–ZÃœM PLANI:"
echo "1. Ana telegram bot dosyasÄ±nÄ± belirle"
echo "2. Systemd servis dosyasÄ± oluÅŸtur"
echo "3. Servisi enable & start yap"
echo "4. Auto-restart politikasÄ± ekle"
echo ""

echo "ðŸ“‹ GEREKLÄ° KOMUTLAR (SSH'ta Ã§alÄ±ÅŸtÄ±rÄ±lacak):"
echo ""
echo "# 1. Durum analizi"
echo "cd /root/PlanB_Motoru"
echo "ls -la telegram_full_trader_with_sentiment.py"
echo "ps aux | grep python"
echo "ps aux | grep telegram"
echo ""
echo "# 2. Ana bot dosyasÄ±nÄ± test et"
echo "python3 telegram_full_trader_with_sentiment.py &"
echo "sleep 5"
echo "kill %1"
echo ""
echo "# 3. Systemd servis dosyasÄ± oluÅŸtur"
echo "cat > /etc/systemd/system/planb.service << 'EOF'"
echo "[Unit]"
echo "Description=PlanB Motoru Telegram Bot"
echo "After=network.target"
echo "StartLimitIntervalSec=0"
echo ""
echo "[Service]"
echo "Type=simple"
echo "Restart=always"
echo "RestartSec=10"
echo "User=root"
echo "WorkingDirectory=/root/PlanB_Motoru"
echo "ExecStart=/usr/bin/python3 telegram_full_trader_with_sentiment.py"
echo "Environment=PYTHONPATH=/root/PlanB_Motoru"
echo ""
echo "[Install]"
echo "WantedBy=multi-user.target"
echo "EOF"
echo ""
echo "# 4. Servisi aktifleÅŸtir"
echo "systemctl daemon-reload"
echo "systemctl enable planb"
echo "systemctl start planb"
echo "systemctl status planb"
echo ""
echo "ðŸš€ SONUÃ‡: Bilgisayar kapansa bile Telegram mesajlarÄ± gelmeye devam eder!"